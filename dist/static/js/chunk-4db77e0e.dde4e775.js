(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4db77e0e"],{"163e":function(e,t,o){"use strict";var i=o("920e"),r=o.n(i);r.a},"2b19":function(e,t,o){"use strict";var i=o("bc3a"),r=o.n(i),a=o("5c96"),l=o("4360"),s=r.a.create({baseURL:"http://imgtext.psyhack.top",withCredentials:!0,timeout:5e3});s.interceptors.request.use((function(e){return l["a"].getters.token,e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 0!==t.code?(Object(a["Message"])({message:t.message||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)})),t["a"]=s},"920e":function(e,t,o){},aa77:function(e,t,o){var i=o("5ca1"),r=o("be13"),a=o("79e5"),l=o("fdef"),s="["+l+"]",n="​",c=RegExp("^"+s+s+"*"),f=RegExp(s+s+"*$"),d=function(e,t,o){var r={},s=a((function(){return!!l[e]()||n[e]()!=n})),c=r[e]=s?t(u):l[e];o&&(r[o]=c),i(i.P+i.F*s,"String",r)},u=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(f,"")),e};e.exports=d},ad8f:function(e,t,o){"use strict";var i=o("2b19"),r=o("bc3a"),a=o.n(r),l=o("5c96"),s=o("4360"),n=a.a.create({baseURL:"https://xinyujiang.cn",withCredentials:!0,timeout:5e3});n.interceptors.request.use((function(e){return s["a"].getters.token,e}),(function(e){return console.log(e),Promise.reject(e)})),n.interceptors.response.use((function(e){var t=e;return-1==t.code?(Object(l["Message"])({message:t.message||"Error",type:"error",duration:5e3}),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return console.log("err"+e),Object(l["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var c=n,f=o("4328"),d=o.n(f);function u(e){return Object(i["a"])({url:"/service/articles/list",method:"post",data:d.a.stringify(e),params:e})}function m(e){return c({url:"/psybot/getpagepaper/",method:"get",data:d.a.stringify(e),params:e})}function p(e){return c({url:"/psybot/setpaper/",method:"post",data:d.a.stringify(e),params:e})}function b(e){return c({url:"/psybot/updatepaper/",method:"post",data:d.a.stringify(e),params:e})}function g(e){return c({url:"/psybot/deletepaper/",method:"post",data:d.a.stringify(e),params:e})}o.d(t,"b",(function(){return u})),o.d(t,"c",(function(){return m})),o.d(t,"d",(function(){return p})),o.d(t,"e",(function(){return b})),o.d(t,"a",(function(){return g}))},c5f6:function(e,t,o){"use strict";var i=o("7726"),r=o("69a8"),a=o("2d95"),l=o("5dbc"),s=o("6a99"),n=o("79e5"),c=o("9093").f,f=o("11e9").f,d=o("86cc").f,u=o("aa77").trim,m="Number",p=i[m],b=p,g=p.prototype,h=a(o("2aeb")(g))==m,v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=v?t.trim():u(t,3);var o,i,r,a=t.charCodeAt(0);if(43===a||45===a){if(o=t.charCodeAt(2),88===o||120===o)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var l,n=t.slice(2),c=0,f=n.length;c<f;c++)if(l=n.charCodeAt(c),l<48||l>r)return NaN;return parseInt(n,i)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof p&&(h?n((function(){g.valueOf.call(o)})):a(o)!=m)?l(new b(y(t)),o,p):y(t)};for(var _,w=o("9e1e")?c(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)r(b,_=w[k])&&!r(p,_)&&d(p,_,f(b,_));p.prototype=g,g.constructor=p,o("2aba")(i,m,p)}},fa4d:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"dashboard-container"},[o("el-row",[o("el-col",{attrs:{span:4}},[o("el-tag",[e._v("您的身份为："+e._s(e.roles[Math.floor(Number(e.role)/2)]))])],1),e._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){e.dialogAddFormVisible=!0}}},[e._v("新增")])],1),e._v(" "),o("el-dialog",{attrs:{title:"新增原创文章",visible:e.dialogAddFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogAddFormVisible=t}}},[e._v("\n      >\n      "),o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"首页图：","label-width":e.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadImgurl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.image?o("img",{staticClass:"avatar",attrs:{src:e.image}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),o("el-form-item",{attrs:{label:"标题：","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发布日期：","label-width":e.formLabelWidth}},[o("el-date-picker",{attrs:{type:"date","value-format":"yyyy.MM.dd",placeholder:"选择日期"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"文章链接：","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.src,callback:function(t){e.$set(e.form,"src",t)},expression:"form.src"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.onSubmitCancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(0)}}},[e._v("提 交")])],1)],1)],1),e._v(" "),o("div",{staticClass:"dashboard-text"},[e._v("线上内容管理-图文管理")]),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.pk))]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.fields.title))]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"首页图",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.fields.image,fit:"contain"}}),e._v(" "),o("div",{staticClass:"demo-image"})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"日期",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-time"}),e._v(" "),o("span",[e._v(e._s(t.row.fields.time))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"链接",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("a",{attrs:{href:t.row.fields.src,target:"_blank"}},[e._v(e._s(t.row.fields.src))])]}}])}),e._v(" "),o("el-table-column",{attrs:{"class-name":"status-col",label:"小程序阅读量",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.cover)+"\n        ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.operation))]),e._v(" "),o("el-button",{staticStyle:{width:"100%",height:"100%",display:"inline-table"},attrs:{type:"warning",size:"mini",plain:""},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),o("el-dialog",{attrs:{align:"left",title:"修改原创文章",visible:e.dialogModifyFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogModifyFormVisible=t}}},[o("el-form",{attrs:{model:e.modifyform}},[o("el-form-item",{attrs:{label:"首页图：","label-width":e.formLabelWidth}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadImgurl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.image?o("img",{staticClass:"avatar",attrs:{src:e.image}}):o("img",{staticClass:"avatar",attrs:{src:e.modifyform.image}})])],1),e._v(" "),o("el-form-item",{attrs:{label:"标题：","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.modifyform.title,callback:function(t){e.$set(e.modifyform,"title",t)},expression:"modifyform.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发布日期：","label-width":e.formLabelWidth}},[o("el-date-picker",{attrs:{"value-format":"yyyy.MM.dd",type:"date",placeholder:"选择日期"},model:{value:e.modifyform.time,callback:function(t){e.$set(e.modifyform,"time",t)},expression:"modifyform.time"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"文章链接：","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.modifyform.src,callback:function(t){e.$set(e.modifyform,"src",t)},expression:"modifyform.src"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.onSubmitCancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(1)}}},[e._v("提 交")])],1)],1),e._v(" "),o("el-button",{staticStyle:{width:"100%",height:"100%",display:"inline-table"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),o("el-dialog",{attrs:{title:"提示",visible:e.confirmDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.confirmDialogVisible=t}}},[o("span",[e._v("是否确认删除")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.confirmDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.ondeletepaper()}}},[e._v("确 定")])],1)])]}}])})],1)],1)},r=[],a=(o("c5f6"),o("db72")),l=o("2f62"),s=o("ad8f"),n={name:"Dashboard",data:function(){return{uploadImgurl:"https://xinyujiang.cn/psybot/setpicture/",list:[],image:"",filter_status:[["1"],["1001","2003"],["2002"]],roles:["内容运营","管理员","产品运营"],dialogAddFormVisible:!1,dialogModifyFormVisible:!1,confirmDialogVisible:!1,form:{image:"",title:"",time:"",src:""},displayform:{},modifyform:{image:"",title:"",time:"",src:"",id:""},formLabelWidth:"120px"}},computed:Object(a["a"])({},Object(l["b"])(["name","token","role","username"])),created:function(){this.fetchData()},methods:{handleEdit:function(e,t){this.dialogModifyFormVisible=!0,this.modifyform=t.fields,this.modifyform["id"]=t.pk},handleDelete:function(e,t){console.log("handledelte"),this.confirmDialogVisible=!0,this.modifyform=t.fields,this.modifyform["id"]=t.pk},ondeletepaper:function(e){console.log(this.modifyform),this.confirmDialogVisible=!1,console.log(this.modifyform.id);var t={id:this.modifyform.id};Object(s["a"])(t).then((function(e){console.log(e)})),location.reload()},clearupform:function(){this.form.title="",this.form.image="",this.form.src="",this.form.time="",this.modifyform.title="",this.modifyform.image="",this.modifyform.src="",this.modifyform.time="",this.image=""},handleClose:function(e){location.reload(),e()},onSubmit:function(e){if(e){console.log("修改表单");var t=JSON.parse(JSON.stringify(this.modifyform));console.log(t),Object(s["e"])(t).then((function(e){console.log(e)}))}else{console.log("新增表单"),console.log(this.image),console.log(this.form),console.log("onsubmit");t=JSON.parse(JSON.stringify(this.form));Object(s["d"])(t).then((function(e){console.log(e)}))}location.reload(),this.dialogAddFormVisible=!1,this.dialogModifyFormVisible=!1},onSubmitCancel:function(){this.dialogModifyFormVisible=!1,this.dialogAddFormVisible=!1,console.log("onsubmitcancel"),location.reload()},handleAvatarSuccess:function(e,t){console.log(e),this.form.image=e.data,this.modifyform.image=e.data,this.image=URL.createObjectURL(t.raw),console.log(this.image)},fileRequest:function(e){},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},fetchData:function(){var e=Math.floor(Number(this.role)/2);for(var t in console.log("fetching",e,this.filter_status),this.filter_status[e]){var o=this;(function(e,t){var o={pagenumber:1,pagesize:20};Object(s["c"])(o).then((function(e){for(var o in e.data.list)t.list.push(e.data.list[o])}))})(0,o)}}}},c=n,f=(o("163e"),o("2877")),d=Object(f["a"])(c,i,r,!1,null,"5b479a3a",null);t["default"]=d.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);